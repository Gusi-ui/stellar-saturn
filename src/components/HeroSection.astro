---
import { ArrowRight, Heart, Users, Star, Sparkles } from 'lucide-react';
---

<section
  class="relative min-h-screen flex items-center justify-center overflow-hidden bg-gradient-to-br from-orange-50 via-amber-50 to-yellow-50 dark:from-gray-900 dark:via-orange-900 dark:to-amber-900"
>
  {/* Video de fondo con parallax */}
  <div class="absolute inset-0 overflow-hidden">
    <video
      id="hero-video"
      class="absolute top-0 left-0 w-full h-full object-cover hidden md:block"
      autoplay
      muted
      loop
      playsinline
      preload="auto"
      aria-hidden="true"
      poster="https://images.unsplash.com/photo-1529390079861-591de354faf5?q=80&w=2070&auto=format&fit=crop"
    >
      <source src="/hero-video.mp4" type="video/mp4" />
    </video>

    {/* Imagen fallback para móviles */}
    <div
      class="absolute inset-0 bg-cover bg-center md:hidden"
      style="background-image: url('https://images.unsplash.com/photo-1529390079861-591de354faf5?q=80&w=2070&auto=format&fit=crop');"
    >
    </div>

    {/* Overlay oscuro semitransparente para mejorar legibilidad del texto */}
    <div class="absolute inset-0 bg-gradient-to-br from-black/50 via-black/40 to-black/50"></div>
  </div>

  {/* Elementos flotantes decorativos */}
  <div class="absolute top-20 left-10 animate-float z-10">
    <div
      class="w-16 h-16 bg-white/20 dark:bg-white/10 backdrop-blur-lg rounded-2xl flex items-center justify-center border border-white/30 shadow-2xl"
    >
      <Heart className="w-8 h-8 text-orange-300 animate-pulse" />
    </div>
  </div>

  <div class="absolute top-40 right-20 animate-float-delay z-10">
    <div
      class="w-20 h-20 bg-white/20 dark:bg-white/10 backdrop-blur-lg rounded-2xl flex items-center justify-center border border-white/30 shadow-2xl"
    >
      <Users className="w-10 h-10 text-amber-300 animate-pulse" />
    </div>
  </div>

  <div class="absolute bottom-32 left-20 animate-float z-10">
    <div
      class="w-14 h-14 bg-white/20 dark:bg-white/10 backdrop-blur-lg rounded-2xl flex items-center justify-center border border-white/30 shadow-2xl"
    >
      <Star className="w-7 h-7 text-yellow-300 animate-pulse" />
    </div>
  </div>

  {/* Contenido principal */}
  <div class="relative z-20 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20">
    <div class="text-center">
      {/* Badge */}
      <div
        class="inline-flex items-center px-4 py-2 bg-white/40 dark:bg-white/20 backdrop-blur-xl rounded-full border border-white/60 mb-8 animate-fade-in shadow-2xl"
      >
        <Sparkles className="w-4 h-4 text-yellow-400 mr-2" />
        <span class="text-sm font-medium text-white drop-shadow-lg">
          Asociación de Diversidad Funcional
        </span>
      </div>

      {/* Título principal */}
      <h1
        class="text-4xl md:text-6xl lg:text-7xl font-bold text-white mb-6 leading-tight"
        style="text-shadow: 2px 2px 8px rgba(0,0,0,0.8), 0 0 20px rgba(0,0,0,0.5);"
      >
        <span class="block animate-fade-in-up">Construyendo un mundo</span>
        <span
          class="block bg-gradient-to-r from-orange-400 via-amber-400 to-yellow-400 bg-clip-text text-transparent animate-fade-in-up delay-200"
          style="text-shadow: 2px 2px 12px rgba(255,140,0,0.8);"
        >
          más inclusivo
        </span>
        <span class="block animate-fade-in-up delay-300">para todos</span>
      </h1>

      {/* Subtítulo */}
      <p
        class="text-xl md:text-2xl text-white mb-8 max-w-3xl mx-auto leading-relaxed animate-fade-in-up delay-400 font-medium"
        style="text-shadow: 2px 2px 8px rgba(0,0,0,0.8);"
      >
        En DiverMataró trabajamos por la plena inclusión de las personas con diversidad funcional,
        promoviendo la accesibilidad universal y una sociedad sin barreras.
      </p>

      {/* CTAs mejorados con glassmorphism */}
      <div
        class="flex flex-col sm:flex-row gap-4 justify-center items-center animate-fade-in-up delay-500"
      >
        <a
          href="/inscripcion/"
          class="group inline-flex items-center px-8 py-4 bg-gradient-to-r from-orange-600 to-amber-600 text-white font-bold rounded-2xl hover:from-orange-700 hover:to-amber-700 transform hover:scale-105 transition-all duration-300 shadow-2xl hover:shadow-orange-500/50"
        >
          <Heart className="w-5 h-5 mr-3 group-hover:animate-bounce" />
          Únete a nuestra asociación
          <ArrowRight className="w-5 h-5 ml-3 group-hover:translate-x-1 transition-transform" />
        </a>

        <a
          href="/quienes-somos/"
          class="group inline-flex items-center px-8 py-4 bg-white/90 backdrop-blur-xl text-gray-900 font-bold rounded-2xl border-2 border-white hover:bg-white transform hover:scale-105 transition-all duration-300 shadow-2xl"
        >
          Conócenos mejor
          <ArrowRight className="w-5 h-5 ml-3 group-hover:translate-x-1 transition-transform" />
        </a>
      </div>

      {/* Stats Section con glassmorphism */}
      <div
        class="grid grid-cols-1 md:grid-cols-3 gap-8 mt-20 max-w-4xl mx-auto animate-fade-in-up delay-600"
      >
        <div class="text-center group">
          <div
            class="w-20 h-20 bg-white/30 backdrop-blur-xl rounded-2xl flex items-center justify-center mx-auto mb-4 border-2 border-white/50 group-hover:scale-110 transition-transform duration-300 shadow-2xl"
          >
            <Users className="w-10 h-10 text-white" />
          </div>
          <div class="text-3xl font-bold text-white mb-2 drop-shadow-lg">200+</div>
          <div class="text-white/90 drop-shadow-lg">Socios activos</div>
        </div>

        <div class="text-center group">
          <div
            class="w-20 h-20 bg-white/30 backdrop-blur-xl rounded-2xl flex items-center justify-center mx-auto mb-4 border-2 border-white/50 group-hover:scale-110 transition-transform duration-300 shadow-2xl"
          >
            <Heart className="w-10 h-10 text-white" />
          </div>
          <div class="text-3xl font-bold text-white mb-2 drop-shadow-lg">22</div>
          <div class="text-white/90 drop-shadow-lg">Años de historia</div>
        </div>

        <div class="text-center group">
          <div
            class="w-20 h-20 bg-white/30 backdrop-blur-xl rounded-2xl flex items-center justify-center mx-auto mb-4 border-2 border-white/50 group-hover:scale-110 transition-transform duration-300 shadow-2xl"
          >
            <Star className="w-10 h-10 text-white" />
          </div>
          <div class="text-3xl font-bold text-white mb-2 drop-shadow-lg">50+</div>
          <div class="text-white/90 drop-shadow-lg">Actividades anuales</div>
        </div>
      </div>
    </div>
  </div>

  {/* Indicador de scroll mejorado */}
  <div class="absolute bottom-8 left-1/2 transform -translate-x-1/2 animate-bounce z-20">
    <div
      class="w-6 h-10 border-2 border-white/80 rounded-full flex justify-center backdrop-blur-sm bg-white/20 shadow-2xl"
    >
      <div class="w-1 h-3 bg-white rounded-full mt-2 animate-pulse"></div>
    </div>
  </div>
</section>

<style>
  @keyframes float {
    0%,
    100% {
      transform: translateY(0px);
    }
    50% {
      transform: translateY(-20px);
    }
  }

  @keyframes float-delay {
    0%,
    100% {
      transform: translateY(0px);
    }
    50% {
      transform: translateY(-15px);
    }
  }

  @keyframes fade-in {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  @keyframes fade-in-up {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-float {
    animation: float 6s ease-in-out infinite;
  }

  .animate-float-delay {
    animation: float-delay 8s ease-in-out infinite;
  }

  .animate-fade-in {
    animation: fade-in 1s ease-out;
  }

  .animate-fade-in-up {
    animation: fade-in-up 0.8s ease-out forwards;
  }

  .delay-200 {
    animation-delay: 0.2s;
  }
  .delay-300 {
    animation-delay: 0.3s;
  }
  .delay-400 {
    animation-delay: 0.4s;
  }
  .delay-500 {
    animation-delay: 0.5s;
  }
  .delay-600 {
    animation-delay: 0.6s;
  }

  /* Parallax effect */
  @media (prefers-reduced-motion: no-preference) {
    #hero-video {
      transition: transform 0.1s ease-out;
      will-change: transform;
    }
  }

  /* Desactivar animaciones si el usuario prefiere reducir movimiento */
  @media (prefers-reduced-motion: reduce) {
    #hero-video {
      animation: none !important;
    }

    .animate-float,
    .animate-float-delay,
    .animate-bounce {
      animation: none !important;
    }

    * {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }
</style>

<script>
  // Efecto parallax sutil en el video
  if (window.matchMedia('(prefers-reduced-motion: no-preference)').matches) {
    const video = document.getElementById('hero-video') as HTMLVideoElement | null;

    if (video) {
      let ticking = false;

      window.addEventListener('scroll', () => {
        if (!ticking) {
          window.requestAnimationFrame(() => {
            const scrolled = window.scrollY;
            const parallaxSpeed = 0.3;
            const translateY = scrolled * parallaxSpeed;

            video.style.transform = `translateY(${translateY}px)`;
            ticking = false;
          });

          ticking = true;
        }
      });
    }
  }

  // Forzar reproducción del video
  document.addEventListener('DOMContentLoaded', () => {
    const video = document.getElementById('hero-video') as HTMLVideoElement | null;

    if (video) {
      // Intentar reproducir el video
      const playPromise = video.play();

      if (playPromise !== undefined) {
        playPromise
          .then(() => {
            console.log('Video playing successfully');
          })
          .catch((error) => {
            console.log('Auto-play prevented:', error);
            // Intentar reproducir en interacción del usuario
            document.addEventListener(
              'click',
              () => {
                video.play();
              },
              { once: true }
            );
          });
      }

      // Pausar cuando no esté visible
      if ('IntersectionObserver' in window) {
        const observer = new IntersectionObserver(
          (entries) => {
            entries.forEach((entry) => {
              if (entry.isIntersecting) {
                video.play().catch(() => {
                  // Silenciar errores de autoplay
                });
              } else {
                video.pause();
              }
            });
          },
          { threshold: 0.1 }
        );

        observer.observe(video);
      }
    }
  });
</script>
